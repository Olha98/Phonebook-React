(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{25:function(e,t,n){"use strict";var r=n(3),a=Object(r.b)("contacts/filterChange",(function(e){return{payload:{filter:e}}})),c=Object(r.b)("contacts/alertError"),o=Object(r.b)("contact/ADDTASKREQUEST"),u=Object(r.b)("contact/ADDTASKSUCCESS"),s=Object(r.b)("contact/ADDTASKERROR"),l=Object(r.b)("contact/GETCONTACTREQUEST"),i=Object(r.b)("contact/GETCONTACTSUCCESS"),b=Object(r.b)("contact/GETCONTACTERROR"),g=Object(r.b)("contact/removeASKREQUEST"),p=Object(r.b)("contact/removeTASKSUCCESS"),m=Object(r.b)("contact/removeTASKERROR");t.a={filterChange:a,alertError:c,addContactRequest:o,addContactSuccess:u,addContactError:s,getContactsRequest:l,getContactsSuccess:i,getContactsError:b,removeContactRequest:g,removeContactSuccess:p,removeContactError:m}},27:function(e,t,n){e.exports={navlink_Header:"Header_navlink_Header__1n1lj"}},31:function(e,t,n){"use strict";var r=n(17),a=n.n(r),c=n(29),o=n(4),u=n(21),s=n.n(u);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var l=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},i=function(){s.a.defaults.headers.common.Authorization=""};t.a={addNewUser:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(o.a.registerRequest()),t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:r=t.sent,l(r.data.token),n(o.a.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(o.a.registerError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},loginUser:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(o.a.loginRequest()),t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:r=t.sent,l(r.data.token),n(o.a.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(o.a.loginError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u0417\u0430\u043f\u0443\u0441\u043a \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u043d\u0434\u0440\u0430 logOut"),t(o.a.logoutRequest()),e.prev=2,e.next=5,s.a.post("/users/logout");case 5:console.log("try logout"),i(),t(o.a.logoutSuccess()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t(o.a.logoutError(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},currentUser:function(){return function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\u0417\u0430\u043f\u0443\u0441\u043a \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u043d\u0434\u0440\u0430 currentUser"),t(o.a.getCurrentUserRequest()),r=n(),c=r.auth.token,console.log(c,"persistedToken900776554"),c){e.next=6;break}return e.abrupt("return");case 6:return l(c),e.prev=7,e.next=10,s.a.get("/users/current");case 10:u=e.sent,console.log(u,"result"),t(o.a.getCurrentUserSuccess(u)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),t(o.a.getCurrentUserError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n){return e.apply(this,arguments)}}()}}},4:function(e,t,n){"use strict";var r=n(3),a=Object(r.b)("auth/registerRequest"),c=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),l=Object(r.b)("auth/loginError"),i=Object(r.b)("auth/logoutRequest"),b=Object(r.b)("auth/logoutSuccess"),g=Object(r.b)("auth/logoutError"),p=Object(r.b)("auth/getCurrentUserRequest"),m=Object(r.b)("auth/getCurrentUserSuccess"),f=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:a,registerSuccess:c,registerError:o,logoutRequest:i,logoutSuccess:b,logoutError:g,loginRequest:u,loginSuccess:s,loginError:l,getCurrentUserRequest:p,getCurrentUserSuccess:m,getCurrentUserError:f}},40:function(e,t,n){e.exports={userMenu_Button:"UserMenu_userMenu_Button__evGMW",userMenu_img:"UserMenu_userMenu_img__Kv67m",list:"UserMenu_list__3koxG"}},61:function(e,t,n){e.exports=n.p+"static/media/88841e3ffd244bb0c9c37ce05256e446.f319d3fe.gif"},66:function(e,t,n){e.exports=n(99)},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var r,a,c,o,u=n(0),s=n.n(u),l=n(19),i=n.n(l),b=n(15),g=n(59),p=n(13),m=n(44),f=n(45),d=n(47),h=n(46),O=n(5),E=[{path:"/",label:"Home",exact:!0,component:Object(u.lazy)((function(){return n.e(7).then(n.bind(null,118))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(u.lazy)((function(){return n.e(6).then(n.bind(null,122))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(u.lazy)((function(){return n.e(5).then(n.bind(null,123))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(u.lazy)((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,119))})),private:!0,restricted:!1}],j=n(23),v=n(30),k=n(27),C=n.n(k),S={isAuthenticated:function(e){return e.auth.token},getUserName:function(e){return e.auth.user.name}},y=n(31),U=n(61),R=n.n(U),A=n(40),_=n.n(A),x=Object(p.b)((function(e){return{name:S.getUserName(e),avatar:"".concat(R.a)}}),{onLogoutUser:y.a.logOut})((function(e){var t=e.avatar,n=e.name,r=e.onLogoutUser;return s.a.createElement("div",null,s.a.createElement("img",{src:t,alt:"",width:"32",className:_.a.userMenu_img}),s.a.createElement("span",null,"Welcome, ",n),s.a.createElement("button",{type:"button",onClick:r,className:_.a.userMenu_Button},"Logout"))})),T=Object(p.b)((function(e){return{isAuth:S.isAuthenticated(e)}}))((function(e){var t=e.isAuth;return s.a.createElement("header",{className:C.a.header},s.a.createElement("ul",null,s.a.createElement(v.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},s.a.createElement(v.a.Brand,{href:"#home"},"Phonebook"),s.a.createElement(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),s.a.createElement(v.a.Collapse,{id:"responsive-navbar-nav"},s.a.createElement(j.a,{className:"mr-auto"},s.a.createElement(j.a.Link,null,s.a.createElement(b.b,{to:"/",className:C.a.navlink_Header},"Home")),t&&s.a.createElement(j.a.Link,null,s.a.createElement(b.b,{to:"/contacts",className:C.a.navlink_Header},"Contacts"))),s.a.createElement(j.a,null,t?s.a.createElement(j.a.Link,null,s.a.createElement(x,null)):s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a.Link,null,s.a.createElement(b.b,{to:"/register",className:C.a.navlink_Header},"Register")),s.a.createElement(j.a.Link,null,s.a.createElement(b.b,{to:"/login",className:C.a.navlink_Header},"Login"))))))))})),w=(n(95),n(62)),q=n(34),N=Object(p.b)((function(e){return{isAuth:S.isAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuth,r=Object(q.a)(e,["component","isAuth"]);return s.a.createElement(O.b,Object.assign({},r,{render:function(e){return n?s.a.createElement(t,e):s.a.createElement(O.a,{to:"/login"})}}))})),L=Object(p.b)((function(e){return{isAuth:S.isAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuth,r=Object(q.a)(e,["component","isAuth"]);return s.a.createElement(O.b,Object.assign({},r,{render:function(e){return n&&r.restricted?s.a.createElement(O.a,{to:"/contacts"}):s.a.createElement(t,e)}}))})),M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.isCurrentUser()}},{key:"render",value:function(){return s.a.createElement(u.Suspense,{fallback:s.a.createElement("h2",null,"Load")},s.a.createElement(w.a,{fluid:"md"},s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement(O.d,null,E.map((function(e){return e.private?s.a.createElement(N,Object.assign({key:e.label},e)):s.a.createElement(L,Object.assign({key:e.label},e))}))))))}}]),n}(u.Component),H=Object(p.b)((function(e){return{isAuth:S.isAuthenticated}}),{isCurrentUser:y.a.currentUser})(M),z=n(9),D=n(43),K=n(7),B=n(3),G=n(25),Q=Object(B.c)([],(r={},Object(z.a)(r,G.a.getContactsSuccess,(function(e,t){return Object(D.a)(t.payload)})),Object(z.a)(r,G.a.addContactSuccess,(function(e,t){return[].concat(Object(D.a)(e),[t.payload])})),Object(z.a)(r,G.a.removeContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),r)),J=Object(B.c)("",Object(z.a)({},G.a.filterChange,(function(e,t){return t.payload.filter}))),P=Object(K.c)({contacts:Q,filter:J,alert:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type;t.payload;switch(n){case G.a.alertError.type:return!e;default:return e}}}),W=n(4),F={name:null,email:null},I=Object(B.c)(F,(a={},Object(z.a)(a,W.a.registerSuccess,(function(e,t){return t.payload.user})),Object(z.a)(a,W.a.loginSuccess,(function(e,t){return t.payload.user})),Object(z.a)(a,W.a.getCurrentUserSuccess,(function(e,t){return t.payload})),Object(z.a)(a,W.a.logoutSuccess,(function(){return F})),a)),V=Object(B.c)(null,(c={},Object(z.a)(c,W.a.registerSuccess,(function(e,t){return t.payload.token})),Object(z.a)(c,W.a.loginSuccess,(function(e,t){return t.payload.token})),Object(z.a)(c,W.a.logoutSuccess,(function(){return null})),c)),X=Object(B.c)(null,(o={},Object(z.a)(o,W.a.registerError,(function(e,t){return t.payload})),Object(z.a)(o,W.a.loginError,(function(e,t){return t.payload})),Object(z.a)(o,W.a.logoutError,(function(e,t){return t.payload})),Object(z.a)(o,W.a.getCurrentUserError,(function(e,t){return t.payload})),o)),Y=Object(K.c)({user:I,token:V,error:X}),Z=n(18),$=n(63),ee={key:"auth",storage:n.n($).a,whitelist:["token"]},te=Object(B.a)({reducer:{state:P,auth:Object(Z.g)(ee,Y)},middleware:Object(B.d)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})}),ne=Object(Z.h)(te);n(98);i.a.render(s.a.createElement(b.a,null,s.a.createElement(p.a,{store:te},s.a.createElement(g.a,{loading:null,persistor:ne},s.a.createElement(H,null)))),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.37e08a68.chunk.js.map